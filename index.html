<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ultra Fast Barcode Scanner</title>
  <script src="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.6.30/dist/dbr.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    #scanner {
      width: 100%;
      max-width: 400px;
      height: 220px; /* smaller preview */
      margin: auto;
      border: 2px solid #333;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }
    /* overlay guide box */
    #guide {
      position: absolute;
      top: 30%;
      left: 15%;
      width: 70%;
      height: 40%;
      border: 2px dashed red;
      pointer-events: none;
    }
    #output {
      margin-top: 20px;
      font-size: 28px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <h2>üöÄ Ultra Fast Barcode Scanner (Code128)</h2>
  <div id="scanner" class="dce-video-container">
    <div id="guide"></div> <!-- guide box -->
  </div>
  <div id="output">üì∑ Hold barcode inside the red box</div>

  <script>
    (async () => {
      try {
        // üîë Replace with your Dynamsoft trial key
        Dynamsoft.DBR.BarcodeScanner.license = "DLS2eyJoYW5kc2hha2VDb2RlIjoiMTA0NDM3MTU3LU1UQTBORE0zTVRVM0xYZGxZaTFVY21saGJGQnliMm8iLCJtYWluU2VydmVyVVJMIjoiaHR0cHM6Ly9tZGxzLmR5bmFtc29mdG9ubGluZS5jb20iLCJvcmdhbml6YXRpb25JRCI6IjEwNDQzNzE1NyIsInN0YW5kYnlTZXJ2ZXJVUkwiOiJodHRwczovL3NkbHMuZHluYW1zb2Z0b25saW5lLmNvbSIsImNoZWNrQ29kZSI6ODc2MzE4NDAxfQ==";

        const scanner = await Dynamsoft.DBR.BarcodeScanner.createInstance();
        await scanner.setUIElement(document.getElementById('scanner'));

        // Restrict to Code128
        let settings = await scanner.getRuntimeSettings();
        settings.barcodeFormatIds = Dynamsoft.DBR.EnumBarcodeFormat.BF_CODE_128;

        // ‚úÖ Define region of interest (in percentages)
        settings.region = {
          regionLeft: 15,   // %
          regionTop: 30,    // %
          regionRight: 85,  // %
          regionBottom: 70, // %
          regionMeasuredByPercentage: 1
        };

        await scanner.updateRuntimeSettings(settings);

        // Event for unique scans
        scanner.onUnduplicatedRead = (txt, result) => {
          document.getElementById("output").textContent = "‚úÖ " + txt;
        };

        await scanner.show();
      } catch (err) {
        console.error(err);
        document.getElementById("output").textContent = "‚ùå Error: " + err.message;
      }
    })();
  </script>
</body>
</html>
