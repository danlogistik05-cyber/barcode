<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ultra Fast Barcode Scanner</title>
  <script src="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.6.30/dist/dbr.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    #scanner {
      width: 100%;
      max-width: 400px;
      height: 250px;
      margin: auto;
      border: 2px solid #333;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }
    #scanner video {
      width: 100% !important;
      height: 100% !important;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }
    #guide {
      position: absolute;
      top: 30%;
      left: 15%;
      width: 70%;
      height: 40%;
      border: 2px dashed red;
      pointer-events: none;
      z-index: 10;
    }
    #output {
      margin-top: 20px;
      font-size: 28px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <h2>üöÄ Ultra Fast Barcode Scanner (Code128)</h2>
  <div id="scanner" class="dce-video-container">
    <div id="guide"></div>
  </div>
  <div id="output">üì∑ Hold barcode inside the red box</div>

  <!-- simple beep sound -->
  <audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

  <script>
    (async () => {
      try {
        // üîë Replace with your Dynamsoft trial key
        Dynamsoft.DBR.BarcodeScanner.license = "DLS2eyJoYW5kc2hha2VDb2RlIjoiMTA0NDM3MTU3LU1UQTBORE0zTVRVM0xYZGxZaTFVY21saGJGQnliMm8iLCJtYWluU2VydmVyVVJMIjoiaHR0cHM6Ly9tZGxzLmR5bmFtc29mdG9ubGluZS5jb20iLCJvcmdhbml6YXRpb25JRCI6IjEwNDQzNzE1NyIsInN0YW5kYnlTZXJ2ZXJVUkwiOiJodHRwczovL3NkbHMuZHluYW1zb2Z0b25saW5lLmNvbSIsImNoZWNrQ29kZSI6ODc2MzE4NDAxfQ==";

        const scanner = await Dynamsoft.DBR.BarcodeScanner.createInstance();
        await scanner.setUIElement(document.getElementById('scanner'));

        // Restrict to Code128
        let settings = await scanner.getRuntimeSettings();
        settings.barcodeFormatIds = Dynamsoft.DBR.EnumBarcodeFormat.BF_CODE_128;
        settings.region = {
          regionLeft: 15,
          regionTop: 30,
          regionRight: 85,
          regionBottom: 70,
          regionMeasuredByPercentage: 1
        };
        await scanner.updateRuntimeSettings(settings);

        // Play sound when scanned
        const beep = document.getElementById("beep");
        scanner.onUnduplicatedRead = (txt, result) => {
          document.getElementById("output").textContent = "‚úÖ " + txt;
          beep.play(); // üîä play confirmation sound
        };

        await scanner.show();
      } catch (err) {
        console.error(err);
        document.getElementById("output").textContent = "‚ùå Error: " + err.message;
      }
    })();
  </script>
</body>
</html>
